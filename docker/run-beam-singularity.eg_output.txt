
manual run on n0000.dirac1,
haven't invoked sbatch yet
the java options limited to single param w/o space as it stands.




**^ tin n0000.dirac1 /global/scratch/tin/tin-gh/beam/Singularity-repo ^**>  ls
beam_production-gemini-develop-1.sif
**^ tin n0000.dirac1 /global/scratch/tin/tin-gh/beam/Singularity-repo ^**>  export SINGULARITY_TMPDIR="/glo
bal/scratch/tin/cacheDir"
**^ tin n0000.dirac1 /global/scratch/tin/tin-gh/beam/Singularity-repo ^**>  singularity pull docker://beamm
odel/beam:production-gemini-develop-1  || echo "Singularity image already cached"   
FATAL:   image file already exists - will not overwrite
Singularity image already cached
**^ tin n0000.dirac1 /global/scratch/tin/tin-gh/beam/Singularity-repo ^**>  export SINGULARITY_BINDPATH="$i
nput_folder_name:/mnt"   # tmp as I don't have actual data for gemini
**^ tin n0000.dirac1 /global/scratch/tin/tin-gh/beam/Singularity-repo ^**>  SINGULARITYENV_JAVA_OPTS='-Xmx9
0g' singularity shell --network host beam_production-gemini-develop-1.sif --config /app/$config
Singularity beam_production-gemini-develop-1.sif:/global/scratch/tin/tin-gh/beam/Singularity-repo> exit
**^ tin n0000.dirac1 /global/scratch/tin/tin-gh/beam/Singularity-repo ^**>  SINGULARITYENV_JAVA_OPTS='-Xms1
2g -Xmx90g' singularity run --network host beam_production-gemini-develop-1.sif --config /app/$config
/.singularity.d/actions/run: 9: export: -Xmx90g: bad variable name
**^ tin n0000.dirac1 /global/scratch/tin/tin-gh/beam/Singularity-repo ^**>  SINGULARITYENV_JAVA_OPTS='-Xmx9
0g' singularity run --network host beam_production-gemini-develop-1.sif --config /app/$config              

  ________
  ___  __ )__________ _______ ___
  __  __  |  _ \  __ `/_  __ `__ \
  _  /_/ //  __/ /_/ /_  / / / / /
  /_____/ \___/\__,_/ /_/ /_/ /_/

 _____________________________________

    
Received 2 arguments: List(--config, /app/production/sfbay/gemini/gemini-base-2035.conf)
Java version: 1.8.0_222
JVM args: List(-Xmx90g)
Heap size: 1.9 GB
Heap max memory: 80.0 GB
Heap free memory: 1.8 GB
00:41:19.471 INFO  beam.sim.RunBeam$ - 
***********************************************************************************************************
*****************  
** Config File Consistency Check
**  
** Testing your config file against what BEAM is expecting.
**  
** Found the following deprecated parameters, you can safely remove them from your config file:
**  
**  beam.agentsim.agentSampleSizeAsFractionOfPopulation
**  beam.agentsim.agents.households.inputFilePath
**  beam.agentsim.agents.households.inputHouseholdAttributesFilePath
**  beam.agentsim.agents.modalBehaviors.defaultValueOfTime
**  beam.agentsim.agents.modalBehaviors.highTimeSensitivity.highCongestion.highwayFactor.Level3
**  beam.agentsim.agents.modalBehaviors.highTimeSensitivity.highCongestion.highwayFactor.LevelLE2
**  beam.agentsim.agents.modalBehaviors.highTimeSensitivity.highCongestion.nonHighwayFactor.Level3
**  beam.agentsim.agents.modalBehaviors.highTimeSensitivity.highCongestion.nonHighwayFactor.LevelLE2
**  beam.agentsim.agents.modalBehaviors.highTimeSensitivity.lowCongestion.highwayFactor.Level3



 4753224 by a factor of 1.0
00:51:54.487 INFO  b.u.scenario.UrbanSimScenarioLoader - Applying persons...
2021-09-28 00:51:59,768  INFO PopulationImpl:112  person # 1
2021-09-28 00:51:59,769  INFO PopulationImpl:112  person # 4
2021-09-28 00:51:59,771  INFO PopulationImpl:112  person # 16
2021-09-28 00:51:59,778  INFO PopulationImpl:112  person # 64
2021-09-28 00:51:59,795  INFO PopulationImpl:112  person # 256
2021-09-28 00:51:59,821  INFO PopulationImpl:112  person # 1024
2021-09-28 00:51:59,882  INFO PopulationImpl:112  person # 4096
2021-09-28 00:52:00,081  INFO PopulationImpl:112  person # 16384
2021-09-28 00:52:00,772  INFO PopulationImpl:112  person # 65536
2021-09-28 00:52:03,571  INFO PopulationImpl:112  person # 262144
2021-09-28 00:52:16,494  INFO PopulationImpl:112  person # 1048576
00:53:26.553 INFO  b.u.scenario.UrbanSimScenarioLoader - Applying plans...
00:53:56.403 INFO  b.u.scenario.UrbanSimScenarioLoader - The scenario loading is completed..
00:53:56.403 INFO  beam.sim.RunBeam$ - Load scenario using urbansim/csv executed in 754502 ms
00:53:56.403 INFO  beam.sim.RunBeam$ - Java version: 1.8.0_222
00:53:56.403 INFO  beam.sim.RunBeam$ - JVM args: List(-Xmx90g)
00:53:56.404 INFO  beam.sim.RunBeam$ - Heap size: 45.2 GB
00:53:56.404 INFO  beam.sim.RunBeam$ - Heap max memory: 80.0 GB
00:53:56.404 INFO  beam.sim.RunBeam$ - Heap free memory: 8.6 GB
00:53:57.221 WARN  beam.sim.RunBeam$ - 
Scenario population size: 3775115
Scenario vehicles size: 0
Scenario lanes size: 0
BeamScenario households size: 2313365
BeamScenario privateVehicles size: 7066589
BeamScenario vehicleTypes size: 133
BeamScenario modIncentives size 0



...

 localhost/127.0.0.1:8086
2021-09-28 00:53:58,628  WARN OutputDirectoryHierarchy:186 ###########################################################
2021-09-28 00:53:58,628  WARN OutputDirectoryHierarchy:187 ### THE CONTROLER WILL OVERWRITE FILES IN:
2021-09-28 00:53:58,629  WARN OutputDirectoryHierarchy:188 ### /global/scratch/tin/tin-gh/beam/Singularity-repo/output/sfbay/gemini-runs-2021-02-27/gemini-base-2035__2021-09-28_00-41-18_yzg
2021-09-28 00:53:58,629  WARN OutputDirectoryHierarchy:189 ###########################################################
2021-09-28 00:53:58,634  INFO StrategyManager:59 global innovation switch off after iteration: 2147483647
2021-09-28 00:53:58,636  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.AddSupplementaryTrips@4085ad86
2021-09-28 00:53:58,636  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.ClearRoutes@4c94cebb
2021-09-28 00:53:58,636  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.ClearRoutes@7cfb1420
2021-09-28 00:53:58,637  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.AddSupplementaryTrips@3d0d775
2021-09-28 00:53:58,637  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.BeamTimeMutator@6e54a314
2021-09-28 00:53:58,637  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.BeamExpBeta@4df5973
2021-09-28 00:53:58,637  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.BeamExpBeta@20a117dc
2021-09-28 00:53:58,637  INFO GenericStrategyManager:315 added change request:  iteration=-2147483648 newWeight=0.0 strategy=beam.replanning.BeamTimeMutator@254f07c2
2021-09-28 00:53:58,637  INFO GenericStrategyManager:347 setting PlanSelectorForRemoval to class org.matsim.core.replanning.selectors.WorstPlanForRemovalSelector
2021-09-28 00:53:58,639  INFO EventsManagerImpl:147 adding Event-Handler: org.matsim.core.scoring.EventsToActivities
2021-09-28 00:53:58,639  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.ActivityStartEventHandler
2021-09-28 00:53:58,640  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.ActivityStartEvent
2021-09-28 00:53:58,640  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.ActivityEndEventHandler
2021-09-28 00:53:58,640  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.ActivityEndEvent
2021-09-28 00:53:58,640  INFO EventsManagerImpl:159 
2021-09-28 00:53:58,641  INFO EventsManagerImpl:147 adding Event-Handler: org.matsim.core.scoring.EventsToLegs
2021-09-28 00:53:58,641  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.PersonDepartureEventHandler
2021-09-28 00:53:58,641  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.PersonDepartureEvent
2021-09-28 00:53:58,641  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.PersonArrivalEventHandler
2021-09-28 00:53:58,641  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.PersonArrivalEvent
2021-09-28 00:53:58,642  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.LinkLeaveEventHandler
2021-09-28 00:53:58,642  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.LinkLeaveEvent
2021-09-28 00:53:58,642  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.LinkEnterEventHandler
2021-09-28 00:53:58,642  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.LinkEnterEvent
2021-09-28 00:53:58,642  INFO EventsManagerImpl:151   org.matsim.core.api.experimental.events.handler.TeleportationArrivalEventHandler
2021-09-28 00:53:58,642  INFO EventsManagerImpl:215     > org.matsim.core.api.experimental.events.TeleportationArrivalEvent
2021-09-28 00:53:58,642  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.TransitDriverStartsEventHandler
2021-09-28 00:53:58,643  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.TransitDriverStartsEvent
2021-09-28 00:53:58,643  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.PersonEntersVehicleEventHandler
2021-09-28 00:53:58,643  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.PersonEntersVehicleEvent
2021-09-28 00:53:58,643  INFO EventsManagerImpl:151   org.matsim.core.api.experimental.events.handler.VehicleArrivesAtFacilityEventHandler
2021-09-28 00:53:58,643  INFO EventsManagerImpl:215     > org.matsim.core.api.experimental.events.VehicleArrivesAtFacilityEvent
2021-09-28 00:53:58,643  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.VehicleEntersTrafficEventHandler
2021-09-28 00:53:58,644  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.VehicleEntersTrafficEvent
2021-09-28 00:53:58,644  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.VehicleLeavesTrafficEventHandler
2021-09-28 00:53:58,644  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.VehicleLeavesTrafficEvent
2021-09-28 00:53:58,644  INFO EventsManagerImpl:159 
2021-09-28 00:53:58,648  INFO ParallelEventsManagerImpl:128 adding Event-Handler org.matsim.core.scoring.ScoringFunctionsForPopulation to thread 0
2021-09-28 00:53:58,648  INFO EventsManagerImpl:147 adding Event-Handler: org.matsim.core.scoring.ScoringFunctionsForPopulation
2021-09-28 00:53:58,648  INFO EventsManagerImpl:151   org.matsim.core.events.handler.BasicEventHandler
2021-09-28 00:53:58,648  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.Event
2021-09-28 00:53:58,648  INFO EventsManagerImpl:151   org.matsim.core.scoring.EventsToLegs$LegHandler
2021-09-28 00:53:58,648  INFO EventsManagerImpl:151   org.matsim.core.scoring.EventsToActivities$ActivityHandler
2021-09-28 00:53:58,648  INFO EventsManagerImpl:159 
00:53:59.099 INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2021-09-28 00:53:59,669  INFO CalcLinkStats:151  resetting `count' to zero.  This info is here since we want to check when this is happening during normal simulation runs.  kai, jan'11
2021-09-28 00:53:59,943  INFO ParallelEventsManagerImpl:128 adding Event-Handler org.matsim.analysis.VolumesAnalyzer to thread 0
2021-09-28 00:53:59,943  INFO EventsManagerImpl:147 adding Event-Handler: org.matsim.analysis.VolumesAnalyzer
2021-09-28 00:53:59,943  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.LinkLeaveEventHandler
2021-09-28 00:53:59,943  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.LinkLeaveEvent
2021-09-28 00:53:59,943  INFO EventsManagerImpl:151   org.matsim.api.core.v01.events.handler.VehicleEntersTrafficEventHandler
2021-09-28 00:53:59,944  INFO EventsManagerImpl:215     > org.matsim.api.core.v01.events.VehicleEntersTrafficEvent
2021-09-28 00:53:59,944  INFO EventsManagerImpl:159 

